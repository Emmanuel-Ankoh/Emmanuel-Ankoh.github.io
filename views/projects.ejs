<%- include('partials/head', { title }) %>
<main id="main" class="container">
  <h1>Projects</h1>
  <form method="GET" action="/projects" style="margin:.5rem 0 1rem;display:flex;gap:.5rem">
    <input name="q" value="<%= typeof q !== 'undefined' ? q : '' %>" placeholder="Search by title, tech, description..." style="flex:1"/>
    <button class="btn" type="submit">Search</button>
  </form>
  <div class="grid">
    <% if ((projects || []).length === 0) { %>
      <p>No projects yet. Admin can add some!</p>
    <% } %>
    <% (projects || []).forEach((p, i) => { %>
      <article class="card" data-aos="fade-up" data-aos-delay="<%= i * 40 %>">
        <img src="<%= p.imageUrl || '/images/placeholder.svg' %>" alt="Screenshot of <%= p.title %>" />
        <div class="card-body">
          <h3><a href="/projects/<%= p.slug %>"><%= p.title %></a></h3>
          <p><%= p.description %></p>
          <div class="tags">
            <% (p.tech || []).forEach(t => { %>
              <span class="tag"><%= t %></span>
            <% }) %>
          </div>
          <div class="actions">
            <% if (p.githubUrl) { %><a class="btn" href="<%= p.githubUrl %>" target="_blank" rel="noopener">Code</a><% } %>
            <% if (p.demoUrl) { %><a class="btn btn-primary" href="<%= p.demoUrl %>" target="_blank" rel="noopener">Live</a><% } %>
          </div>
        </div>
      </article>
    <% }) %>
  </div>
</main>
<%- include('partials/footer') %>
