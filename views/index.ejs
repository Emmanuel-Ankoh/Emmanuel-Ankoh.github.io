<%- include('partials/head', { title }) %>
<main id="main">
  <section class="hero" aria-label="Intro">
    <div class="container hero-grid">
      <div>
        <h1 data-aos="fade-up">Hi, I'm <span class="accent"><%= (settings && settings.name) || (profile && profile.name) || 'Your Name' %></span></h1>
  <p class="subtitle" data-aos="fade-up" data-aos-delay="100"><%= (settings && settings.headline) || (profile && profile.headline) || 'Full-Stack Developer' %></p>
  <% const missionCopy = (settings && settings.mission) || (profile && profile.mission); %>
  <p data-aos="fade-up" data-aos-delay="200"><%= missionCopy || (settings && settings.summary) || (profile && profile.summary) || 'I build fast, accessible, and delightful web apps with clean code and solid engineering practices.' %></p>
        <div class="hero-ctas" data-aos="fade-up" data-aos-delay="300">
          <a href="<%= (settings && settings.homeCta && settings.homeCta.primaryUrl) || '/projects' %>" class="btn btn-primary"><%= (settings && settings.homeCta && settings.homeCta.primaryText) || 'View Projects' %></a>
          <a href="<%= (settings && settings.homeCta && settings.homeCta.secondaryUrl) || '/contact' %>" class="btn"><%= (settings && settings.homeCta && settings.homeCta.secondaryText) || 'Get in Touch' %></a>
          <% if ((settings && settings.resumeUrl) || (profile && profile.resumeUrl)) { %>
            <a href="<%= (settings && settings.resumeUrl) || (profile && profile.resumeUrl) %>" class="btn" target="_blank" rel="noopener">Resume</a>
          <% } %>
        </div>
        <% if (settings && settings.socials || (profile && profile.socials)) { %>
          <ul class="socials" style="margin-top:.75rem;display:flex;gap:.75rem;flex-wrap:wrap" data-aos="fade-up" data-aos-delay="350">
            <% const socials = (settings && settings.socials) || (profile && profile.socials) || {}; %>
            <% if (socials.github) { %><li><a href="<%= socials.github %>" target="_blank" rel="noopener">GitHub</a></li><% } %>
            <% if (socials.linkedin) { %><li><a href="<%= socials.linkedin %>" target="_blank" rel="noopener">LinkedIn</a></li><% } %>
            <% if (socials.twitter) { %><li><a href="<%= socials.twitter %>" target="_blank" rel="noopener">Twitter</a></li><% } %>
            <% if (socials.instagram) { %><li><a href="<%= socials.instagram %>" target="_blank" rel="noopener">Instagram</a></li><% } %>
            <% if (socials.youtube) { %><li><a href="<%= socials.youtube %>" target="_blank" rel="noopener">YouTube</a></li><% } %>
            <% if (socials.stackoverflow) { %><li><a href="<%= socials.stackoverflow %>" target="_blank" rel="noopener">Stack Overflow</a></li><% } %>
            <% if (socials.email) { %><li><a href="mailto:<%= socials.email %>">Email</a></li><% } %>
          </ul>
        <% } %>
        <% const loc = (settings && settings.location) || (profile && profile.location); const phone = (settings && settings.phone) || (profile && profile.phone); const avail = (settings && settings.availability) ?? (profile && profile.availability); const s2 = (settings && settings.socials) || (profile && profile.socials) || {}; %>
        <% if (loc || phone || s2.email || typeof avail === 'boolean') { %>
          <ul class="meta" style="margin-top:.5rem;display:flex;gap:1rem;flex-wrap:wrap;color:var(--muted)">
            <% if (loc) { %><li>üìç <%= loc %></li><% } %>
            <% if (s2.email) { %><li>‚úâÔ∏è <a href="mailto:<%= s2.email %>"><%= s2.email %></a></li><% } %>
            <% if (phone) { %><li>‚òéÔ∏è <a href="tel:<%= phone %>"><%= phone %></a></li><% } %>
            <% if (typeof avail === 'boolean') { %><li><span class="badge" style="border:1px solid var(--border);padding:.15rem .5rem;border-radius:999px"><%= avail ? 'Open to work' : 'Not available' %></span></li><% } %>
          </ul>
        <% } %>
      </div>
      <div data-aos="fade-left" data-aos-delay="150" style="text-align:right">
  <img src="<%= (settings && settings.avatarUrl) || (profile && profile.avatarUrl) || '/images/placeholder.svg' %>" alt="Avatar" style="width:280px;max-width:100%;height:280px;object-fit:cover;border-radius:50%;border:2px solid var(--border)" loading="lazy" decoding="async" />
      </div>
    </div>
  </section>

  <section class="timeline-preview" aria-labelledby="timeline-preview-heading">
    <div class="container">
      <h2 id="timeline-preview-heading">Recent Experience</h2>
      <% if (profile && Array.isArray(profile.timeline) && profile.timeline.length) { %>
        <ol class="timeline">
          <% profile.timeline.slice(0,3).forEach((item, idx) => { %>
            <li data-aos="fade-up" <%= idx ? ('data-aos-delay="' + (idx*80) + '"') : '' %>>
              <h3><%= item.title || (item.year || 'Entry') %></h3>
              <p>
                <%= item.subtitle || '' %>
                <%= (item.subtitle && item.year) ? ' ¬∑ ' : '' %>
                <%= item.year || '' %>
              </p>
              <% if (item.description) { %><p><%= item.description %></p><% } %>
            </li>
          <% }) %>
        </ol>
        <p style="margin-top:.5rem"><a class="btn" href="/about">See full timeline</a></p>
      <% } else { %>
        <p>Add timeline items in Admin ‚Üí Profile to showcase your experience here.</p>
      <% } %>
    </div>
  </section>

  <section class="about-preview" aria-labelledby="about-preview-heading">
    <div class="container about-grid" style="display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:start">
      <div data-aos="fade-up">
        <h2 id="about-preview-heading">About Me</h2>
        <% if (profile && profile.aboutBody) { %>
          <div class="about-snippet"><%- profile.aboutBody %></div>
        <% } else { %>
          <p><%= (profile && profile.summary) || 'I‚Äôm a developer focused on building fast, accessible products with clean code.' %></p>
        <% } %>
        <p style="margin-top:.75rem"><a class="btn" href="/about">Read more</a></p>
      </div>
      <div data-aos="fade-left">
        <h2>Skills</h2>
        <% const skillGroups = (profile && Array.isArray(profile.skillGroups)) ? profile.skillGroups.filter(g => g && g.skills && g.skills.length) : []; %>
        <% if (skillGroups.length) { %>
          <div class="skill-group-preview">
            <% skillGroups.slice(0,2).forEach(group => { %>
              <article>
                <h3><%= group.title || 'Skills' %></h3>
                <ul class="skills mini">
                  <% (group.skills || []).slice(0,4).forEach(s => { %>
                    <li><span><%= s.name %></span><div class="bar"><span class="bar-fill" data-level="<%= Math.max(0, Math.min(100, s.level||0)) %>"></span></div></li>
                  <% }) %>
                </ul>
              </article>
            <% }) %>
          </div>
          <p style="margin-top:.5rem"><a class="btn" href="/skills">See all skills</a></p>
        <% } else if (profile && Array.isArray(profile.skills) && profile.skills.length) { %>
          <ul class="skills">
            <% profile.skills.slice(0,6).forEach((s) => { %>
              <li><span><%= s.name %></span><div class="bar"><span class="bar-fill" data-level="<%= Math.max(0, Math.min(100, s.level||0)) %>"></span></div></li>
            <% }) %>
          </ul>
          <p style="margin-top:.5rem"><a class="btn" href="/skills">See all skills</a></p>
        <% } else { %>
          <p>Skills will appear here after you add them in Admin ‚Üí Profile.</p>
        <% } %>
      </div>
    </div>
  </section>

  <section class="featured" aria-labelledby="featured-heading">
    <div class="container">
      <h2 id="featured-heading">Featured Projects</h2>
      <div class="grid">
        <% if ((featured || []).length === 0) { %>
          <p>No featured projects yet. Check back soon!</p>
        <% } %>
        <% (featured || []).forEach((p, i) => { %>
          <article class="card" data-aos="fade-up" data-aos-delay="<%= i * 50 %>">
            <img src="<%= p.imageUrl || '/images/placeholder.svg' %>" alt="Screenshot of <%= p.title %>" loading="lazy" decoding="async"
                 <% if (p.imageUrl && clSrcset(p.imageUrl)) { %>
                   srcset="<%= clSrcset(p.imageUrl) %>" sizes="<%= clSizesDefault %>"
                 <% } %>
            />
            <div class="card-body">
              <h3><%= p.title %></h3>
              <p><%= p.description %></p>
              <div class="tags">
                <% (p.tech || []).forEach(t => { %>
                  <span class="tag"><%= t %></span>
                <% }) %>
              </div>
              <div class="actions">
                <% if (p.githubUrl) { %><a class="btn" href="<%= p.githubUrl %>" target="_blank" rel="noopener">Code</a><% } %>
                <% if (p.demoUrl) { %><a class="btn btn-primary" href="<%= p.demoUrl %>" target="_blank" rel="noopener">Live</a><% } %>
              </div>
            </div>
          </article>
        <% }) %>
      </div>
      <% if ((featured || []).length) { %>
        <div style="margin-top:1rem;text-align:center">
          <a class="btn" href="/projects">See all projects</a>
        </div>
      <% } %>
    </div>
  </section>

  <section class="testimonials" aria-labelledby="testimonials-heading">
    <div class="container">
      <h2 id="testimonials-heading">Testimonials</h2>
      <% const testimonials = (profile && Array.isArray(profile.testimonials)) ? profile.testimonials.filter(t => t.name && t.quote) : []; %>
      <% if (testimonials.length) { %>
        <div class="testimonials-grid">
          <% testimonials.slice(0,6).forEach((t, idx) => { %>
            <article class="testimonial-card" data-aos="fade-up" data-aos-delay="<%= idx * 60 %>">
              <% if (t.avatarUrl) { %>
                <img src="<%= t.avatarUrl %>" alt="Portrait of <%= t.name %>" loading="lazy" decoding="async">
              <% } %>
              <blockquote>‚Äú<%= t.quote %>‚Äù</blockquote>
              <footer>
                <div>
                  <strong><%= t.name %></strong>
                  <% if (t.role) { %>
                    <span> ¬∑ <%= t.role %></span>
                  <% } %>
                </div>
                <% if (t.link) { %>
                  <a href="<%= t.link %>" target="_blank" rel="noopener">View</a>
                <% } %>
              </footer>
            </article>
          <% }) %>
        </div>
      <% } else { %>
        <p>Add testimonials in Admin ‚Üí Profile to build social proof.</p>
      <% } %>
    </div>
  </section>

  <section class="notes" aria-labelledby="notes-heading">
    <div class="container">
      <h2 id="notes-heading">Latest Writing</h2>
      <% const notes = (profile && Array.isArray(profile.notes)) ? profile.notes.filter(n => n.title && (n.summary || n.url)) : []; %>
      <% if (notes.length) { %>
        <div class="notes-list">
          <% notes.slice(0,4).forEach((entry, idx) => { %>
            <article class="note-card" data-aos="fade-up" data-aos-delay="<%= idx * 60 %>">
              <h3><%= entry.title %></h3>
              <% if (entry.date) { %><p class="note-date"><%= entry.date %></p><% } %>
              <% if (entry.summary) { %><p><%= entry.summary %></p><% } %>
              <div class="actions">
                <% if (entry.url) { %>
                  <a class="btn btn-primary" href="<%= entry.url %>" target="_blank" rel="noopener">Read</a>
                <% } else { %>
                  <a class="btn" href="/notes#note-<%= idx %>">Details</a>
                <% } %>
              </div>
            </article>
          <% }) %>
        </div>
        <% if (notes.length > 4) { %>
          <p style="margin-top:1rem"><a class="btn" href="/notes">View all notes</a></p>
        <% } %>
      <% } else { %>
        <p>Use Admin ‚Üí Profile to add a few recent posts, talks, or resources.</p>
      <% } %>
    </div>
  </section>

  <section class="contact-cta" aria-labelledby="contact-cta-heading">
    <div class="container" data-aos="fade-up">
      <h2 id="contact-cta-heading">Get in touch</h2>
      <p>
        <%= (settings && settings.contactIntro) || (profile && profile.contactIntro) || 'Feel free to reach out for collaborations or just a friendly hello.' %>
      </p>
      <div class="toolbar" style="margin-top:.5rem">
        <a class="btn btn-primary" href="/contact">Contact me</a>
        <% const email2 = ((settings && settings.socials && settings.socials.email) || (profile && profile.socials && profile.socials.email)); %>
        <% if (email2) { %>
          <a class="btn" href="mailto:<%= email2 %>">Email</a>
        <% } %>
      </div>
    </div>
  </section>
</main>
<%- include('partials/footer') %>
